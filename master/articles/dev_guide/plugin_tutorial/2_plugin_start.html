<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Writing a basic plug-in </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Writing a basic plug-in ">
    <meta name="generator" content="docfx 2.47.0.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    <meta property="docfx:urlPrefix" content="/bepinex_docs/">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
              <div class="version-selector" style="display: none;">
                <span>Version:</span>
                <form>
                    <select class="versions-dropdown"></select>
                </form>
              </div>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-7">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="writing-a-basic-plug-in">Writing a basic plug-in</h1>

<p>In this step we continue by writing code for a simple plug-in that displays a message in the console.</p>
<h2 id="defining-the-plug-in-class">Defining the plug-in class</h2>
<p>Continuing from the previous step, rename <code>Class1.cs</code> to the name of your plugin. In this instance, we'll rename ours to <code>ExamplePlugin.cs</code>.</p>
<p>Open the source file. You'll see there is already some generic boilerplate code for a class.</p>
<p>Edit the class to inherit from <a class="xref" href="../../../api/BepInEx.BaseUnityPlugin.html">BaseUnityPlugin</a> and add <a class="xref" href="../../../api/BepInEx.BepInPlugin.html">BepInPlugin</a> attribute to the class:</p>
<pre><code class="lang-csharp">using System;
using BepInEx;

namespace ExamplePlugin
{
    [BepInPlugin(&quot;org.bepinex.plugins.exampleplugin&quot;, &quot;Example Plug-In&quot;, &quot;1.0.0.0&quot;)]
    public class ExamplePlugin : BaseUnityPlugin
    {
    }
}
</code></pre>
<p>And that is everything you have to do in order for a class to be a valid plug-in!
Note that the name of the namespace and the plug-in class are likely different in your case, so if you copy-paste, you might want to edit them.</p>
<p>Next, we'll dive a bit deeper into what all of this means.</p>
<h2 id="specifying-metadata-with-attributes">Specifying metadata with attributes</h2>
<p>By itself, a simple class that inherits <a class="xref" href="../../../api/BepInEx.BaseUnityPlugin.html">BaseUnityPlugin</a> doesn't tell BepInEx much.
However, BepInEx has to know some information about the class in order to know how to load the plug-in.
This is done by specifying C# attributes to the class as we defined above.</p>
<p>Let's go over some of the most important attributes you might want to use.
For more attributes and exact documentation, visit the <a href="../../../api/index.html">API docs</a>.</p>
<h3 id="basic-information-about-the-plug-in">Basic information about the plug-in</h3>
<p>The most crucial attribute is <a class="xref" href="../../../api/BepInEx.BepInPlugin.html">BepInPlugin</a>. <strong>Without it, BepInEx will simply ignore loading of the plug-in!</strong></p>
<p>The attribute consists of three string parameters that are:</p>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GUID</code></td>
<td>A unique identifier of the plugin. <strong>It absolutely must be unique</strong> as BepInEx uses it to detect duplicate plugins and sort dependencies. It is recommended (but not mandatory) to use the <a href="https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html">reverse domain name notation</a> for GUIDs.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td>A human-readable name of the plug-in.</td>
</tr>
<tr>
<td><code>Version</code></td>
<td>Version of the plugin. The version format <strong>must</strong> be of the form <code>major.minor[.build[.revision]]</code> (i.e. a format that <a href="https://docs.microsoft.com/en-us/dotnet/api/system.version">System.Version</a> can parse).</td>
</tr>
</tbody>
</table>
<p>Here's a simple example of the attribute:</p>
<pre><code class="lang-csharp">[BepInPlugin(&quot;org.bepinex.plugins.exampleplugin&quot;, &quot;Example Plug-In&quot;, &quot;1.0.0.0&quot;)]
public class ExamplePlugin : BaseUnityPlugin
</code></pre>
<h3 id="specifying-dependencies-on-other-plug-ins">Specifying dependencies on other plug-ins</h3>
<p>Sometimes you might want to load some plug-ins before other ones.
Moreover, in some cases you want to ensure that a user has installed some other plug-in in order for yours to function.</p>
<p>You can specify dependencies on other plug-ins with <a class="xref" href="../../../api/BepInEx.BepInDependency.html">BepInDependency</a> attribute.<br>
You can specify the attribute multiple times for multiple dependencies.</p>
<p>The attribute consists of only two parameters:</p>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DependencyGUID</code></td>
<td>The GUID of the plug-in that yours depends on. Must be in the exact same format and case as defined in the dependency.</td>
</tr>
<tr>
<td><code>Flags</code></td>
<td><em>Optional.</em> Specifies a flag from <a class="xref" href="../../../api/BepInEx.BepInDependency.DependencyFlags.html">BepInDependency.DependencyFlags</a> that tells how to handle missing dependencies. A <em>soft dependency</em> means that the plug-in can be loaded even if the dependency is missing. A <em>hard dependency</em> means that a plug-in must be skipped if the dependency is missing.</td>
</tr>
</tbody>
</table>
<p>Here's a simple example of the attribute:</p>
<pre><code class="lang-csharp">[BepInPlugin(&quot;org.bepinex.plugins.exampleplugin&quot;, &quot;Example Plug-In&quot;, &quot;1.0.0.0&quot;)]

// A soft dependency. Loading won't be skipped if it's missing.
[BepInDependency(&quot;com.bepinex.plugin.somedependency&quot;, BepInDependency.DependencyFlags.SoftDependency)]
// A hard dependency. Loading will be skipped (and an error shown) if the dependency is missing.
[BepInDependency(&quot;com.bepinex.plugin.importantdependency&quot;, BepInDependency.DependencyFlags.HardDependency)]
// If flags are not specified, the dependency is **hard** by default
[BepInDependency(&quot;com.bepinex.plugin.anotherimportantone&quot;)]
public class ExamplePlugin : BaseUnityPlugin
</code></pre>
<h3 id="filtering-executables">Filtering executables</h3>
<p>In some cases you may want to allow to load the plugin only in certain games.
For instance, your plug-in only works in one game and you want to prevent users from installing a plug-in into a wrong game.
Alternatively, there might be multiple games in the same game folder, and you want to load your plugin only in one of those games.</p>
<p>You can specify what games to load the plug-in on with <a class="xref" href="../../../api/BepInEx.BepInProcess.html">BepInProcess</a> attribute.</p>
<p>The attribute has only one parameter: <code>ProcessName</code> that is simply the name of the process that the plug-in is allowed to run on (including the <code>.exe</code> extension).<br>
Naturally, you can specify the attribute multiple times.</p>
<p>An example of the attribute usage:</p>
<pre><code class="lang-csharp">[BepInPlugin(&quot;org.bepinex.plugins.exampleplugin&quot;, &quot;Example Plug-In&quot;, &quot;1.0.0.0&quot;)]
[BepInProcess(&quot;Risk of Rain 2.exe&quot;)]
[BepInProcess(&quot;AnotherGame.exe&quot;)]
public class ExamplePlugin : BaseUnityPlugin
</code></pre>
<h2 id="adding-code-to-the-plug-in">Adding code to the plug-in</h2>
<p>Under the hood, <a class="xref" href="../../../api/BepInEx.BaseUnityPlugin.html">BaseUnityPlugin</a> inherits from <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html">MonoBehaviour</a>.
This means you can access all game objects using Unity's own API.</p>
<p>As an example, we'll log <code>Hello, world!</code> text when the plug-in is starting.
For that we'll add the call into <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.Awake.html">MonoBehaviour.Awake</a>:</p>
<pre><code class="lang-csharp">[BepInPlugin(&quot;org.bepinex.plugins.exampleplugin&quot;, &quot;Example Plug-In&quot;, &quot;1.0.0.0&quot;)]
public class ExamplePlugin : BaseUnityPlugin
{
    // Awake is called once when both the game and the plug-in are loaded
    void Awake()
    {
        UnityEngine.Debug.Log(&quot;Hello, world!&quot;);
    }
}
</code></pre>
<h2 id="compiling-and-testing-the-plug-in">Compiling and testing the plug-in</h2>
<p>Once the base code of the plug-in has been written, it's time to compile and test it.</p>
<p>To compile the plug-in, you can either use <code>Build &gt; Build Solution</code> menu option or <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>B</kbd> shortcut.</p>
<p>Once the compilation is complete, you can find you plug-in DLL in <code>&lt;Project Directory&gt;\bin\Debug</code> (or <code>Release</code> if you built the release build).
The name of the DLL is the same as the name of the project (not the source code file). Thus in the case of the project, the name of the plug-in DLL is <code>ExamplePlugin.dll</code></p>
<p><img src="images/build-output.png" alt="An example location of the built DLL"></p>
<p>To test the plug-in, move the plug-in DLL into <code>BepInEx\plugins\&lt;Plug-in name&gt;</code> folder in your target game.</p>
<div class="NOTE">
<h5>Note</h5>
<p>It is not mandatory to put plug-ins into separate folders inside <code>BepInEx\plugins</code>, but it is <strong>recommended</strong>.
Doing so will simplify installation and the removal process of each plug-in.</p>
</div>
<p>Finally, open up the game and gaze upon the BepInEx console:</p>
<p><img src="images/plugin-works.png" alt="An example of the working Hello, world plug-in."></p>
<p>Note that you have to enable the console via <a class="xref" href="../../user_guide/configuration.html">the configuration file</a> to see the debug message.</p>
<h2 id="next-steps">Next steps</h2>
<p>You can continue by adding more plug-ins or modifying the example plug-in!<br>
Remember that a single DLL can contain multiple plug-in classes: that is, you can add more classes that inherit from <a class="xref" href="../../../api/BepInEx.BaseUnityPlugin.html">BaseUnityPlugin</a> and have the <a class="xref" href="../../../api/BepInEx.BepInPlugin.html">BepInPlugin</a> attribute and have multiple plugins in the same DLL.</p>
<p>Next, we'll look at how to create and manage configuration files of the plug-in.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/BepInEx/bepinex_docs/blob/a37f9020061fd598c5b5a02796230a48c2602b0b/articles/dev_guide/plugin_tutorial/2_plugin_start.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
